@model TaskManagementSystem.Models.Task

@{
    Layout = "~/Views/Shared/_UserLayout.cshtml";
    ViewBag.Title = "Task Details";
}

<style>
    .task-details-container {
        max-width: 100%;
        margin: -20px auto;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 15px;
        background-color: #f9f9f9;
        max-height: 100%
    }

        .task-details-container h2 {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .task-details-container h4 {
            color: #333;
            margin-bottom: 10px;
        }

        .task-details-container p {
            color: #666;
            margin-bottom: 5px;
        }

            .task-details-container p.task-name {
                font-size: 30px;
                font-weight: bold;
                color: #000;
                margin-bottom: 10px;
            }
</style>

<div class="task-details-container">
    <div>
        <p class="task-name">@Model.TaskName</p>
    </div>
    <div>
        <h4>Description:</h4>
        <p>@Model.TaskDescription</p>
    </div>
    <div>
        <h4>Attachments (@ViewBag.AttachmentCount):</h4>
        @if (ViewBag.AttachmentCount > 0)
        {
            foreach (var fileName in ViewBag.AttachmentFileNames)
            {
                string filePath = Url.Content("~/Files/" + Model.TaskName + "-Attachments/" + fileName);
                string fileExtension = Path.GetExtension(fileName).ToLower();

                if (fileExtension == ".jpg" || fileExtension == ".jpeg" || fileExtension == ".png" || fileExtension == ".gif")
                {
                    <a href="@filePath" target="_blank"><img src="@Url.Content(filePath)" alt="@fileName" style="max-width: 100%; height: auto; cursor: pointer;" /></a>
                }
                else if (fileExtension == ".pdf")
                {
                    <a href="@filePath" target="_blank"><embed src="@filePath" type="application/pdf" width="100px" height="150px" /></a>
                }
                else
                {
                    <p><a href="@filePath" target="_blank">@fileName</a></p>
                }
            }
        }
        else
        {
            <p>No attachments found for this task.</p>
        }
    </div>
</div>




